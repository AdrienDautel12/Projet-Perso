<-------------------------

CODE DU CONTROLEUR

------------------------->

<?php

include 'modeleContact.php';

$action = filter_input(INPUT_GET, "a");

if ($action == "liste" || $action == "") {
    //aller dans le modèle chercher la liste de contact
    $listeDeContact = listerContact();
    
    //on apelle la vue pour afficher le contenu du tableau
    include ('listeContact.php');
    exit();
}

if ($action == "addContact") {
    //appel de la vue pour le formulaire de contact
    include ('editerContact.php');
    exit();
}




if ($action == "validerAddContact") {

    //on attribut une variable à nos saisie du formulaire
    $nom = filter_input(INPUT_POST, "nom");
    $prenom = filter_input(INPUT_POST, "prenom");
    $telPortable = filter_input(INPUT_POST, "telPortable");
    $telDom = filter_input(INPUT_POST, "telDom");
    
    

    //si l'un des champs de texte est vide il n'est pas possible d'ajouter le contact
    if ($nom == "" || $prenom == "" || $telPortable == "" || $telDom == "") {
        echo "Il manque des information pour ajouter le contact ou l'un des numéros saisie n'est pas correct.";
        echo"<br/>";
        
        echo"<a href=\"controleurContact.php?a=addContact\">";
                echo"<input type=\"button\" value=\"Revenir en arrière\" name=\"backAjouterContact\"/>";
            echo"</a>";
            
        //si les champs sont correctement remplit, utilisation de la fonction add pour ajouter le contact à la base
        //et retour sur la page avec la liste de contact
    } else {
        addContact($nom, $prenom, $telPortable, $telDom);
        

        header('Location:controleurContact.php?a=liste');
    }
    
    exit();
}



//Supprimer un contact
$idContact = filter_input(INPUT_GET, "idContact");
if ($action == "supprimer" && $idContact != "") {
//    echo "SUPPRIMER : $idContact";
    
    supprimer($idContact);
    
    header('Location:controleurContact.php?a=liste');
    exit();
}
